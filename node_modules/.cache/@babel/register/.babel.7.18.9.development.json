{"{\"assumptions\":{},\"sourceRoot\":\"/home/minhyuk/바탕화면/zoom/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/minhyuk/바탕화면/zoom\",\"filename\":\"/home/minhyuk/바탕화면/zoom/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/minhyuk/바탕화면/zoom\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _ws = _interopRequireDefault(require(\"ws\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar app = (0, _express[\"default\"])();\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n});\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n});\n\nvar handleListen = function handleListen() {\n  return console.log(\"Listening on http://localhost:3000\");\n};\n\nvar server = _http[\"default\"].createServer(app);\n\nvar wss = new _ws[\"default\"].Server({\n  server: server\n});\n\nfunction handleConnection(socket) {\n  console.log(socket);\n}\n\nvar sockets = [];\nwss.on(\"connection\", function (socket) {\n  sockets.push(socket);\n  socket[\"nickname\"] = \"Anonymous\";\n  console.log(\"Connected to Browser!\");\n  socket.on(\"close\", function () {\n    return console.log(\"Disconnected from the Browser!\");\n  });\n  socket.on(\"message\", function (msg) {\n    var message = JSON.parse(msg);\n\n    switch (message.type) {\n      case \"new_message\":\n        sockets.forEach(function (aSocket) {\n          return aSocket.send(\"\".concat(socket.nickname, \": \").concat(message.payload));\n        });\n\n      case \"nickname\":\n        socket.nickname = message.payload;\n    }\n  });\n});\nserver.listen(3000, handleListen);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwic2V0IiwiX19kaXJuYW1lIiwidXNlIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicmVkaXJlY3QiLCJoYW5kbGVMaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsIndzcyIsIldlYlNvY2tldCIsIlNlcnZlciIsImhhbmRsZUNvbm5lY3Rpb24iLCJzb2NrZXQiLCJzb2NrZXRzIiwib24iLCJwdXNoIiwibXNnIiwibWVzc2FnZSIsIkpTT04iLCJwYXJzZSIsInR5cGUiLCJmb3JFYWNoIiwiYVNvY2tldCIsInNlbmQiLCJuaWNrbmFtZSIsInBheWxvYWQiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6Ii9ob21lL21pbmh5dWsv67CU7YOV7ZmU66m0L3pvb20vc3JjLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgV2ViU29ja2V0IGZyb20gXCJ3c1wiO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XG5hcHAuc2V0KFwidmlld3NcIiwgX19kaXJuYW1lICsgXCIvdmlld3NcIik7XG5hcHAudXNlKFwiL3B1YmxpY1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyBcIi9wdWJsaWNcIikpO1xuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiByZXMucmVuZGVyKFwiaG9tZVwiKSk7XG5hcHAuZ2V0KFwiLypcIiwgKHJlcSwgcmVzKSA9PiByZXMucmVkaXJlY3QoXCIvXCIpKTtcblxuY29uc3QgaGFuZGxlTGlzdGVuID0gKCkgPT4gY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDBgKTtcblxuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcbmNvbnN0IHdzcyA9IG5ldyBXZWJTb2NrZXQuU2VydmVyKHsgc2VydmVyIH0pO1xuXG5mdW5jdGlvbiBoYW5kbGVDb25uZWN0aW9uKHNvY2tldCkge1xuICBjb25zb2xlLmxvZyhzb2NrZXQpO1xufVxuXG5jb25zdCBzb2NrZXRzID0gW107XG53c3Mub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcbiAgc29ja2V0cy5wdXNoKHNvY2tldCk7XG4gIHNvY2tldFtcIm5pY2tuYW1lXCJdID0gXCJBbm9ueW1vdXNcIjtcbiAgY29uc29sZS5sb2coXCJDb25uZWN0ZWQgdG8gQnJvd3NlciFcIik7XG4gIHNvY2tldC5vbihcImNsb3NlXCIsICgpID0+IGNvbnNvbGUubG9nKFwiRGlzY29ubmVjdGVkIGZyb20gdGhlIEJyb3dzZXIhXCIpKTtcbiAgc29ja2V0Lm9uKFwibWVzc2FnZVwiLCAobXNnKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UobXNnKTtcbiAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgICAgY2FzZSBcIm5ld19tZXNzYWdlXCI6XG4gICAgICAgIHNvY2tldHMuZm9yRWFjaCgoYVNvY2tldCkgPT5cbiAgICAgICAgICBhU29ja2V0LnNlbmQoYCR7c29ja2V0Lm5pY2tuYW1lfTogJHttZXNzYWdlLnBheWxvYWR9YClcbiAgICAgICAgKTtcbiAgICAgIGNhc2UgXCJuaWNrbmFtZVwiOlxuICAgICAgICBzb2NrZXQubmlja25hbWUgPSBtZXNzYWdlLnBheWxvYWQ7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5zZXJ2ZXIubGlzdGVuKDMwMDAsIGhhbmRsZUxpc3Rlbik7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxJQUFNQSxHQUFHLEdBQUcsSUFBQUMsbUJBQUEsR0FBWjtBQUVBRCxHQUFHLENBQUNFLEdBQUosQ0FBUSxhQUFSLEVBQXVCLEtBQXZCO0FBQ0FGLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLE9BQVIsRUFBaUJDLFNBQVMsR0FBRyxRQUE3QjtBQUNBSCxHQUFHLENBQUNJLEdBQUosQ0FBUSxTQUFSLEVBQW1CSCxtQkFBQSxXQUFlRSxTQUFTLEdBQUcsU0FBM0IsQ0FBbkI7QUFDQUgsR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixFQUFhLFVBQUNDLEdBQUQsRUFBTUMsR0FBTjtFQUFBLE9BQWNBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLE1BQVgsQ0FBZDtBQUFBLENBQWI7QUFDQVIsR0FBRyxDQUFDSyxHQUFKLENBQVEsSUFBUixFQUFjLFVBQUNDLEdBQUQsRUFBTUMsR0FBTjtFQUFBLE9BQWNBLEdBQUcsQ0FBQ0UsUUFBSixDQUFhLEdBQWIsQ0FBZDtBQUFBLENBQWQ7O0FBRUEsSUFBTUMsWUFBWSxHQUFHLFNBQWZBLFlBQWU7RUFBQSxPQUFNQyxPQUFPLENBQUNDLEdBQVIsc0NBQU47QUFBQSxDQUFyQjs7QUFFQSxJQUFNQyxNQUFNLEdBQUdDLGdCQUFBLENBQUtDLFlBQUwsQ0FBa0JmLEdBQWxCLENBQWY7O0FBQ0EsSUFBTWdCLEdBQUcsR0FBRyxJQUFJQyxjQUFBLENBQVVDLE1BQWQsQ0FBcUI7RUFBRUwsTUFBTSxFQUFOQTtBQUFGLENBQXJCLENBQVo7O0FBRUEsU0FBU00sZ0JBQVQsQ0FBMEJDLE1BQTFCLEVBQWtDO0VBQ2hDVCxPQUFPLENBQUNDLEdBQVIsQ0FBWVEsTUFBWjtBQUNEOztBQUVELElBQU1DLE9BQU8sR0FBRyxFQUFoQjtBQUNBTCxHQUFHLENBQUNNLEVBQUosQ0FBTyxZQUFQLEVBQXFCLFVBQUNGLE1BQUQsRUFBWTtFQUMvQkMsT0FBTyxDQUFDRSxJQUFSLENBQWFILE1BQWI7RUFDQUEsTUFBTSxDQUFDLFVBQUQsQ0FBTixHQUFxQixXQUFyQjtFQUNBVCxPQUFPLENBQUNDLEdBQVIsQ0FBWSx1QkFBWjtFQUNBUSxNQUFNLENBQUNFLEVBQVAsQ0FBVSxPQUFWLEVBQW1CO0lBQUEsT0FBTVgsT0FBTyxDQUFDQyxHQUFSLENBQVksZ0NBQVosQ0FBTjtFQUFBLENBQW5CO0VBQ0FRLE1BQU0sQ0FBQ0UsRUFBUCxDQUFVLFNBQVYsRUFBcUIsVUFBQ0UsR0FBRCxFQUFTO0lBQzVCLElBQU1DLE9BQU8sR0FBR0MsSUFBSSxDQUFDQyxLQUFMLENBQVdILEdBQVgsQ0FBaEI7O0lBQ0EsUUFBUUMsT0FBTyxDQUFDRyxJQUFoQjtNQUNFLEtBQUssYUFBTDtRQUNFUCxPQUFPLENBQUNRLE9BQVIsQ0FBZ0IsVUFBQ0MsT0FBRDtVQUFBLE9BQ2RBLE9BQU8sQ0FBQ0MsSUFBUixXQUFnQlgsTUFBTSxDQUFDWSxRQUF2QixlQUFvQ1AsT0FBTyxDQUFDUSxPQUE1QyxFQURjO1FBQUEsQ0FBaEI7O01BR0YsS0FBSyxVQUFMO1FBQ0ViLE1BQU0sQ0FBQ1ksUUFBUCxHQUFrQlAsT0FBTyxDQUFDUSxPQUExQjtJQU5KO0VBUUQsQ0FWRDtBQVdELENBaEJEO0FBa0JBcEIsTUFBTSxDQUFDcUIsTUFBUCxDQUFjLElBQWQsRUFBb0J4QixZQUFwQiJ9","map":{"version":3,"names":["app","express","set","__dirname","use","get","req","res","render","redirect","handleListen","console","log","server","http","createServer","wss","WebSocket","Server","handleConnection","socket","sockets","on","push","msg","message","JSON","parse","type","forEach","aSocket","send","nickname","payload","listen"],"sourceRoot":"/home/minhyuk/바탕화면/zoom/src/","sources":["server.js"],"sourcesContent":["import http from \"http\";\nimport WebSocket from \"ws\";\nimport express from \"express\";\n\nconst app = express();\n\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", express.static(__dirname + \"/public\"));\napp.get(\"/\", (req, res) => res.render(\"home\"));\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\n\nconst handleListen = () => console.log(`Listening on http://localhost:3000`);\n\nconst server = http.createServer(app);\nconst wss = new WebSocket.Server({ server });\n\nfunction handleConnection(socket) {\n  console.log(socket);\n}\n\nconst sockets = [];\nwss.on(\"connection\", (socket) => {\n  sockets.push(socket);\n  socket[\"nickname\"] = \"Anonymous\";\n  console.log(\"Connected to Browser!\");\n  socket.on(\"close\", () => console.log(\"Disconnected from the Browser!\"));\n  socket.on(\"message\", (msg) => {\n    const message = JSON.parse(msg);\n    switch (message.type) {\n      case \"new_message\":\n        sockets.forEach((aSocket) =>\n          aSocket.send(`${socket.nickname}: ${message.payload}`)\n        );\n      case \"nickname\":\n        socket.nickname = message.payload;\n    }\n  });\n});\n\nserver.listen(3000, handleListen);\n"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEA,IAAMA,GAAG,GAAG,IAAAC,mBAAA,GAAZ;AAEAD,GAAG,CAACE,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAF,GAAG,CAACE,GAAJ,CAAQ,OAAR,EAAiBC,SAAS,GAAG,QAA7B;AACAH,GAAG,CAACI,GAAJ,CAAQ,SAAR,EAAmBH,mBAAA,WAAeE,SAAS,GAAG,SAA3B,CAAnB;AACAH,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN;EAAA,OAAcA,GAAG,CAACC,MAAJ,CAAW,MAAX,CAAd;AAAA,CAAb;AACAR,GAAG,CAACK,GAAJ,CAAQ,IAAR,EAAc,UAACC,GAAD,EAAMC,GAAN;EAAA,OAAcA,GAAG,CAACE,QAAJ,CAAa,GAAb,CAAd;AAAA,CAAd;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe;EAAA,OAAMC,OAAO,CAACC,GAAR,sCAAN;AAAA,CAArB;;AAEA,IAAMC,MAAM,GAAGC,gBAAA,CAAKC,YAAL,CAAkBf,GAAlB,CAAf;;AACA,IAAMgB,GAAG,GAAG,IAAIC,cAAA,CAAUC,MAAd,CAAqB;EAAEL,MAAM,EAANA;AAAF,CAArB,CAAZ;;AAEA,SAASM,gBAAT,CAA0BC,MAA1B,EAAkC;EAChCT,OAAO,CAACC,GAAR,CAAYQ,MAAZ;AACD;;AAED,IAAMC,OAAO,GAAG,EAAhB;AACAL,GAAG,CAACM,EAAJ,CAAO,YAAP,EAAqB,UAACF,MAAD,EAAY;EAC/BC,OAAO,CAACE,IAAR,CAAaH,MAAb;EACAA,MAAM,CAAC,UAAD,CAAN,GAAqB,WAArB;EACAT,OAAO,CAACC,GAAR,CAAY,uBAAZ;EACAQ,MAAM,CAACE,EAAP,CAAU,OAAV,EAAmB;IAAA,OAAMX,OAAO,CAACC,GAAR,CAAY,gCAAZ,CAAN;EAAA,CAAnB;EACAQ,MAAM,CAACE,EAAP,CAAU,SAAV,EAAqB,UAACE,GAAD,EAAS;IAC5B,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWH,GAAX,CAAhB;;IACA,QAAQC,OAAO,CAACG,IAAhB;MACE,KAAK,aAAL;QACEP,OAAO,CAACQ,OAAR,CAAgB,UAACC,OAAD;UAAA,OACdA,OAAO,CAACC,IAAR,WAAgBX,MAAM,CAACY,QAAvB,eAAoCP,OAAO,CAACQ,OAA5C,EADc;QAAA,CAAhB;;MAGF,KAAK,UAAL;QACEb,MAAM,CAACY,QAAP,GAAkBP,OAAO,CAACQ,OAA1B;IANJ;EAQD,CAVD;AAWD,CAhBD;AAkBApB,MAAM,CAACqB,MAAP,CAAc,IAAd,EAAoBxB,YAApB"}},"mtime":1659418347461},"{\"assumptions\":{},\"sourceRoot\":\"/home/minhyuk/바탕화면/ZoomClone/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/minhyuk/바탕화면/ZoomClone\",\"filename\":\"/home/minhyuk/바탕화면/ZoomClone/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/minhyuk/바탕화면/ZoomClone\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _socket = _interopRequireDefault(require(\"socket.io\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar app = (0, _express[\"default\"])();\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n});\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n});\n\nvar httpServer = _http[\"default\"].createServer(app);\n\nvar wsServer = (0, _socket[\"default\"])(httpServer);\n\nfunction publicRooms() {\n  var _wsServer$sockets$ada = wsServer.sockets.adapter,\n      sids = _wsServer$sockets$ada.sids,\n      rooms = _wsServer$sockets$ada.rooms;\n  var publicRooms = [];\n  rooms.forEach(function (_, key) {\n    if (sids.get(key) === undefined) {\n      publicRooms.push(key);\n    }\n  });\n  return publicRooms;\n}\n\nfunction countRoom(roomName) {\n  var _wsServer$sockets$ada2;\n\n  // roomName을 찾을 수도 있지만 아닐 수도있기에, ?를 넣어준다.\n  return (_wsServer$sockets$ada2 = wsServer.sockets.adapter.rooms.get(roomName)) === null || _wsServer$sockets$ada2 === void 0 ? void 0 : _wsServer$sockets$ada2.size; // Set이기 때문에 size를 써준다.\n}\n\nwsServer.on(\"connection\", function (socket) {\n  // wsServer.socketsJoin(\"announcement\"); // 모든 유저가 announcement 채널로 가게한다.\n  socket.nickname = \"Anonymous\";\n  socket.onAny(function (event) {\n    console.log(\"Socket Event: \".concat(event));\n  }); // server.js에서 emit 했던 3번째 argument에 있던 함수가 done이 됩니다.\n\n  socket.on(\"enter_room\", function (roomName, done) {\n    socket.join(roomName); // 이 done function은 프론트엔드에서 실행 버튼을 눌러주는 것이라 보면됩니다.\n\n    done(countRoom(roomName)); // 이 function은 보안 문제의 이유로 백엔드에서 실행시키지 않습니다.\n\n    socket.to(roomName).emit(\"welcome\", socket.nickname, countRoom(roomName));\n    wsServer.sockets.emit(\"room_change\", publicRooms()); //\n  });\n  socket.on(\"disconnecting\", function () {\n    socket.rooms.forEach(function (room) {\n      return socket.to(room).emit(\"bye\", socket.nickname, countRoom(room) - 1);\n    } //아직 방을 떠나지 않았기에 -1을 해준다\n    );\n  });\n  socket.on(\"disconnect\", function () {\n    wsServer.sockets.emit(\"room_change\", publicRooms());\n  });\n  socket.on(\"new_message\", function (msg, room, done) {\n    socket.to(room).emit(\"new_message\", \"\".concat(socket.nickname, \": \").concat(msg));\n    done();\n  });\n  socket.on(\"nickname\", function (nickname) {\n    return socket.nickname = nickname;\n  });\n}); // function handleConnection(socket) {\n//   console.log(socket);\n// }\n// const sockets = [];\n// wss.on(\"connection\", (socket) => {\n//   sockets.push(socket);\n//   socket[\"nickname\"] = \"Anonymous\";\n//   console.log(\"Connected to Browser!\");\n//   socket.on(\"close\", () => console.log(\"Disconnected from the Browser!\"));\n//   socket.on(\"message\", (msg) => {\n//     const message = JSON.parse(msg);\n//     switch (message.type) {\n//       case \"new_message\":\n//         sockets.forEach((aSocket) =>\n//           aSocket.send(`${socket.nickname}: ${message.payload}`)\n//         );\n//       case \"nickname\":\n//         socket.nickname = message.payload;\n//     }\n//   });\n// });\n\nvar handleListen = function handleListen() {\n  return console.log(\"Listening on http://localhost:3000\");\n};\n\nhttpServer.listen(3000, handleListen);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwic2V0IiwiX19kaXJuYW1lIiwidXNlIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicmVkaXJlY3QiLCJodHRwU2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsIndzU2VydmVyIiwiU29ja2V0SU8iLCJwdWJsaWNSb29tcyIsInNvY2tldHMiLCJhZGFwdGVyIiwic2lkcyIsInJvb21zIiwiZm9yRWFjaCIsIl8iLCJrZXkiLCJ1bmRlZmluZWQiLCJwdXNoIiwiY291bnRSb29tIiwicm9vbU5hbWUiLCJzaXplIiwib24iLCJzb2NrZXQiLCJuaWNrbmFtZSIsIm9uQW55IiwiZXZlbnQiLCJjb25zb2xlIiwibG9nIiwiZG9uZSIsImpvaW4iLCJ0byIsImVtaXQiLCJyb29tIiwibXNnIiwiaGFuZGxlTGlzdGVuIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9taW5oeXVrL+uwlO2Dle2ZlOuptC9ab29tQ2xvbmUvc3JjLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgU29ja2V0SU8gZnJvbSBcInNvY2tldC5pb1wiO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XG5hcHAuc2V0KFwidmlld3NcIiwgX19kaXJuYW1lICsgXCIvdmlld3NcIik7XG5hcHAudXNlKFwiL3B1YmxpY1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyBcIi9wdWJsaWNcIikpO1xuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiByZXMucmVuZGVyKFwiaG9tZVwiKSk7XG5hcHAuZ2V0KFwiLypcIiwgKHJlcSwgcmVzKSA9PiByZXMucmVkaXJlY3QoXCIvXCIpKTtcblxuY29uc3QgaHR0cFNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG5jb25zdCB3c1NlcnZlciA9IFNvY2tldElPKGh0dHBTZXJ2ZXIpO1xuXG5mdW5jdGlvbiBwdWJsaWNSb29tcygpIHtcbiAgY29uc3Qge1xuICAgIHNvY2tldHM6IHtcbiAgICAgIGFkYXB0ZXI6IHsgc2lkcywgcm9vbXMgfSxcbiAgICB9LFxuICB9ID0gd3NTZXJ2ZXI7XG4gIGNvbnN0IHB1YmxpY1Jvb21zID0gW107XG4gIHJvb21zLmZvckVhY2goKF8sIGtleSkgPT4ge1xuICAgIGlmIChzaWRzLmdldChrZXkpID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHB1YmxpY1Jvb21zLnB1c2goa2V5KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcHVibGljUm9vbXM7XG59XG5mdW5jdGlvbiBjb3VudFJvb20ocm9vbU5hbWUpIHtcbiAgLy8gcm9vbU5hbWXsnYQg7LC+7J2EIOyImOuPhCDsnojsp4Drp4wg7JWE64uQIOyImOuPhOyeiOq4sOyXkCwgP+ulvCDrhKPslrTspIDri6QuXG4gIHJldHVybiB3c1NlcnZlci5zb2NrZXRzLmFkYXB0ZXIucm9vbXMuZ2V0KHJvb21OYW1lKT8uc2l6ZTsgLy8gU2V07J206riwIOuVjOusuOyXkCBzaXpl66W8IOyNqOykgOuLpC5cbn1cbndzU2VydmVyLm9uKFwiY29ubmVjdGlvblwiLCAoc29ja2V0KSA9PiB7XG4gIC8vIHdzU2VydmVyLnNvY2tldHNKb2luKFwiYW5ub3VuY2VtZW50XCIpOyAvLyDrqqjrk6Ag7Jyg7KCA6rCAIGFubm91bmNlbWVudCDssYTrhJDroZwg6rCA6rKM7ZWc64ukLlxuICBzb2NrZXQubmlja25hbWUgPSBcIkFub255bW91c1wiO1xuICBzb2NrZXQub25BbnkoKGV2ZW50KSA9PiB7XG4gICAgY29uc29sZS5sb2coYFNvY2tldCBFdmVudDogJHtldmVudH1gKTtcbiAgfSk7XG4gIC8vIHNlcnZlci5qc+yXkOyEnCBlbWl0IO2WiOuNmCAz67KI7Ke4IGFyZ3VtZW507JeQIOyeiOuNmCDtlajsiJjqsIAgZG9uZeydtCDrkKnri4jri6QuXG4gIHNvY2tldC5vbihcImVudGVyX3Jvb21cIiwgKHJvb21OYW1lLCBkb25lKSA9PiB7XG4gICAgc29ja2V0LmpvaW4ocm9vbU5hbWUpO1xuICAgIC8vIOydtCBkb25lIGZ1bmN0aW9u7J2AIO2UhOuhoO2KuOyXlOuTnOyXkOyEnCDsi6Ttlokg67KE7Yq87J2EIOuIjOufrOyjvOuKlCDqsoPsnbTrnbwg67O066m065Cp64uI64ukLlxuICAgIGRvbmUoY291bnRSb29tKHJvb21OYW1lKSk7IC8vIOydtCBmdW5jdGlvbuydgCDrs7TslYgg66y47KCc7J2YIOydtOycoOuhnCDrsLHsl5Trk5zsl5DshJwg7Iuk7ZaJ7Iuc7YKk7KeAIOyViuyKteuLiOuLpC5cbiAgICBzb2NrZXQudG8ocm9vbU5hbWUpLmVtaXQoXCJ3ZWxjb21lXCIsIHNvY2tldC5uaWNrbmFtZSwgY291bnRSb29tKHJvb21OYW1lKSk7XG4gICAgd3NTZXJ2ZXIuc29ja2V0cy5lbWl0KFwicm9vbV9jaGFuZ2VcIiwgcHVibGljUm9vbXMoKSk7IC8vXG4gIH0pO1xuICBzb2NrZXQub24oXCJkaXNjb25uZWN0aW5nXCIsICgpID0+IHtcbiAgICBzb2NrZXQucm9vbXMuZm9yRWFjaChcbiAgICAgIChyb29tKSA9PlxuICAgICAgICBzb2NrZXQudG8ocm9vbSkuZW1pdChcImJ5ZVwiLCBzb2NrZXQubmlja25hbWUsIGNvdW50Um9vbShyb29tKSAtIDEpIC8v7JWE7KeBIOuwqeydhCDrlqDrgpjsp4Ag7JWK7JWY6riw7JeQIC0x7J2EIO2VtOykgOuLpFxuICAgICk7XG4gIH0pO1xuICBzb2NrZXQub24oXCJkaXNjb25uZWN0XCIsICgpID0+IHtcbiAgICB3c1NlcnZlci5zb2NrZXRzLmVtaXQoXCJyb29tX2NoYW5nZVwiLCBwdWJsaWNSb29tcygpKTtcbiAgfSk7XG4gIHNvY2tldC5vbihcIm5ld19tZXNzYWdlXCIsIChtc2csIHJvb20sIGRvbmUpID0+IHtcbiAgICBzb2NrZXQudG8ocm9vbSkuZW1pdChcIm5ld19tZXNzYWdlXCIsIGAke3NvY2tldC5uaWNrbmFtZX06ICR7bXNnfWApO1xuICAgIGRvbmUoKTtcbiAgfSk7XG4gIHNvY2tldC5vbihcIm5pY2tuYW1lXCIsIChuaWNrbmFtZSkgPT4gKHNvY2tldC5uaWNrbmFtZSA9IG5pY2tuYW1lKSk7XG59KTtcbi8vIGZ1bmN0aW9uIGhhbmRsZUNvbm5lY3Rpb24oc29ja2V0KSB7XG4vLyAgIGNvbnNvbGUubG9nKHNvY2tldCk7XG4vLyB9XG5cbi8vIGNvbnN0IHNvY2tldHMgPSBbXTtcbi8vIHdzcy5vbihcImNvbm5lY3Rpb25cIiwgKHNvY2tldCkgPT4ge1xuLy8gICBzb2NrZXRzLnB1c2goc29ja2V0KTtcbi8vICAgc29ja2V0W1wibmlja25hbWVcIl0gPSBcIkFub255bW91c1wiO1xuLy8gICBjb25zb2xlLmxvZyhcIkNvbm5lY3RlZCB0byBCcm93c2VyIVwiKTtcbi8vICAgc29ja2V0Lm9uKFwiY2xvc2VcIiwgKCkgPT4gY29uc29sZS5sb2coXCJEaXNjb25uZWN0ZWQgZnJvbSB0aGUgQnJvd3NlciFcIikpO1xuLy8gICBzb2NrZXQub24oXCJtZXNzYWdlXCIsIChtc2cpID0+IHtcbi8vICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShtc2cpO1xuLy8gICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4vLyAgICAgICBjYXNlIFwibmV3X21lc3NhZ2VcIjpcbi8vICAgICAgICAgc29ja2V0cy5mb3JFYWNoKChhU29ja2V0KSA9PlxuLy8gICAgICAgICAgIGFTb2NrZXQuc2VuZChgJHtzb2NrZXQubmlja25hbWV9OiAke21lc3NhZ2UucGF5bG9hZH1gKVxuLy8gICAgICAgICApO1xuLy8gICAgICAgY2FzZSBcIm5pY2tuYW1lXCI6XG4vLyAgICAgICAgIHNvY2tldC5uaWNrbmFtZSA9IG1lc3NhZ2UucGF5bG9hZDtcbi8vICAgICB9XG4vLyAgIH0pO1xuLy8gfSk7XG5jb25zdCBoYW5kbGVMaXN0ZW4gPSAoKSA9PiBjb25zb2xlLmxvZyhgTGlzdGVuaW5nIG9uIGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMGApO1xuaHR0cFNlcnZlci5saXN0ZW4oMzAwMCwgaGFuZGxlTGlzdGVuKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7OztBQUVBLElBQU1BLEdBQUcsR0FBRyxJQUFBQyxtQkFBQSxHQUFaO0FBRUFELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLGFBQVIsRUFBdUIsS0FBdkI7QUFDQUYsR0FBRyxDQUFDRSxHQUFKLENBQVEsT0FBUixFQUFpQkMsU0FBUyxHQUFHLFFBQTdCO0FBQ0FILEdBQUcsQ0FBQ0ksR0FBSixDQUFRLFNBQVIsRUFBbUJILG1CQUFBLFdBQWVFLFNBQVMsR0FBRyxTQUEzQixDQUFuQjtBQUNBSCxHQUFHLENBQUNLLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOO0VBQUEsT0FBY0EsR0FBRyxDQUFDQyxNQUFKLENBQVcsTUFBWCxDQUFkO0FBQUEsQ0FBYjtBQUNBUixHQUFHLENBQUNLLEdBQUosQ0FBUSxJQUFSLEVBQWMsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOO0VBQUEsT0FBY0EsR0FBRyxDQUFDRSxRQUFKLENBQWEsR0FBYixDQUFkO0FBQUEsQ0FBZDs7QUFFQSxJQUFNQyxVQUFVLEdBQUdDLGdCQUFBLENBQUtDLFlBQUwsQ0FBa0JaLEdBQWxCLENBQW5COztBQUNBLElBQU1hLFFBQVEsR0FBRyxJQUFBQyxrQkFBQSxFQUFTSixVQUFULENBQWpCOztBQUVBLFNBQVNLLFdBQVQsR0FBdUI7RUFDckIsNEJBSUlGLFFBSkosQ0FDRUcsT0FERixDQUVJQyxPQUZKO0VBQUEsSUFFZUMsSUFGZix5QkFFZUEsSUFGZjtFQUFBLElBRXFCQyxLQUZyQix5QkFFcUJBLEtBRnJCO0VBS0EsSUFBTUosV0FBVyxHQUFHLEVBQXBCO0VBQ0FJLEtBQUssQ0FBQ0MsT0FBTixDQUFjLFVBQUNDLENBQUQsRUFBSUMsR0FBSixFQUFZO0lBQ3hCLElBQUlKLElBQUksQ0FBQ2IsR0FBTCxDQUFTaUIsR0FBVCxNQUFr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","map":{"version":3,"names":["app","express","set","__dirname","use","get","req","res","render","redirect","httpServer","http","createServer","wsServer","SocketIO","publicRooms","sockets","adapter","sids","rooms","forEach","_","key","undefined","push","countRoom","roomName","size","on","socket","nickname","onAny","event","console","log","done","join","to","emit","room","msg","handleListen","listen"],"sourceRoot":"/home/minhyuk/바탕화면/ZoomClone/src/","sources":["server.js"],"sourcesContent":["import http from \"http\";\nimport SocketIO from \"socket.io\";\nimport express from \"express\";\n\nconst app = express();\n\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", express.static(__dirname + \"/public\"));\napp.get(\"/\", (req, res) => res.render(\"home\"));\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\n\nconst httpServer = http.createServer(app);\nconst wsServer = SocketIO(httpServer);\n\nfunction publicRooms() {\n  const {\n    sockets: {\n      adapter: { sids, rooms },\n    },\n  } = wsServer;\n  const publicRooms = [];\n  rooms.forEach((_, key) => {\n    if (sids.get(key) === undefined) {\n      publicRooms.push(key);\n    }\n  });\n  return publicRooms;\n}\nfunction countRoom(roomName) {\n  // roomName을 찾을 수도 있지만 아닐 수도있기에, ?를 넣어준다.\n  return wsServer.sockets.adapter.rooms.get(roomName)?.size; // Set이기 때문에 size를 써준다.\n}\nwsServer.on(\"connection\", (socket) => {\n  // wsServer.socketsJoin(\"announcement\"); // 모든 유저가 announcement 채널로 가게한다.\n  socket.nickname = \"Anonymous\";\n  socket.onAny((event) => {\n    console.log(`Socket Event: ${event}`);\n  });\n  // server.js에서 emit 했던 3번째 argument에 있던 함수가 done이 됩니다.\n  socket.on(\"enter_room\", (roomName, done) => {\n    socket.join(roomName);\n    // 이 done function은 프론트엔드에서 실행 버튼을 눌러주는 것이라 보면됩니다.\n    done(countRoom(roomName)); // 이 function은 보안 문제의 이유로 백엔드에서 실행시키지 않습니다.\n    socket.to(roomName).emit(\"welcome\", socket.nickname, countRoom(roomName));\n    wsServer.sockets.emit(\"room_change\", publicRooms()); //\n  });\n  socket.on(\"disconnecting\", () => {\n    socket.rooms.forEach(\n      (room) =>\n        socket.to(room).emit(\"bye\", socket.nickname, countRoom(room) - 1) //아직 방을 떠나지 않았기에 -1을 해준다\n    );\n  });\n  socket.on(\"disconnect\", () => {\n    wsServer.sockets.emit(\"room_change\", publicRooms());\n  });\n  socket.on(\"new_message\", (msg, room, done) => {\n    socket.to(room).emit(\"new_message\", `${socket.nickname}: ${msg}`);\n    done();\n  });\n  socket.on(\"nickname\", (nickname) => (socket.nickname = nickname));\n});\n// function handleConnection(socket) {\n//   console.log(socket);\n// }\n\n// const sockets = [];\n// wss.on(\"connection\", (socket) => {\n//   sockets.push(socket);\n//   socket[\"nickname\"] = \"Anonymous\";\n//   console.log(\"Connected to Browser!\");\n//   socket.on(\"close\", () => console.log(\"Disconnected from the Browser!\"));\n//   socket.on(\"message\", (msg) => {\n//     const message = JSON.parse(msg);\n//     switch (message.type) {\n//       case \"new_message\":\n//         sockets.forEach((aSocket) =>\n//           aSocket.send(`${socket.nickname}: ${message.payload}`)\n//         );\n//       case \"nickname\":\n//         socket.nickname = message.payload;\n//     }\n//   });\n// });\nconst handleListen = () => console.log(`Listening on http://localhost:3000`);\nhttpServer.listen(3000, handleListen);\n"],"mappings":"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"}},"mtime":1659690130787}}